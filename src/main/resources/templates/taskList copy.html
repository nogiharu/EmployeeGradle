<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">

	<link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
	<title>社員管理システム</title>
	<style type="text/css">
		.container table td.text-center {
			vertical-align: middle;
		}
	</style>
</head>

<body>
	<!-- 縮小の自動補正 -->
	<div class="container">
		<!-- 中央寄せ -->
		<div class="row justify-content-center">
			<!-- カラムの幅 -->
			<div class="col-md-10">
				<!-- 下線を引き3px下げる -->
				<h4 class="border-bottom my-3" th:text="${department.name}"></h4>
				<div class="col h5">

					<input type="radio" th:onclick="|location.href='/task/__${department.id}__'|"
						th:checked="${session.mode == 'all'}"> 全社員　　　
					<input type="radio" th:onclick="|location.href='/task/true/__${department.id}__'|"
						th:checked="${session.mode == true}">在籍社員　　　
					<input type="radio" th:onclick="|location.href='/task/false/__${department.id}__'|"
						th:checked="${session.mode == false}">退職社員　　　
					<input type="radio" th:onclick="|location.href='/department'|">営業課一覧へ戻る
				</div>

				<!-- テープル枠線、カーソル -->
				<table class="table table-bordered table-hover">
					<tr class="table-warning">
						<th class="text-center">ID</th>
						<th class="text-center">氏名</th>
						<th class="text-center">担当地区</th>
						<th class="text-center">売上</th>
						<th class="text-center">保有顧客数</th>
						<th class="text-center">更新日時</th>
						<th></th>
						<th></th>
					</tr>
					<form method="get">
						<!-- 一覧画面表示 -->
						<tr th:each="task : ${taskList.content}" th:object="${task}"
							th:classappend="*{deleteFlg} ? '' : 'bg-secondary text-white' ">
							<td th:text="*{employeeId}" class="text-center"></td>
							<td th:text="*{name}" class="text-center"></td>
							<td th:text="*{area}" class="text-center"></td>
							<td th:text="*{sales}" class="text-center"></td>
							<td th:text="*{customers}" class="text-center"></td>
							<td th:text="*{updateDate}" class="text-center"></td>
							<td class="text-center"><button type="submit" th:disabled="*{!deleteFlg}"
									th:formaction="@{/task/update/__*{employeeId}__}"
									class="btn btn-warning">編集</button></td>
							<td class="text-center"><button type="submit" th:disabled="*{!deleteFlg}"
									th:onclick="|check('__*{employeeId}__','__*{name}__')|"
									class="btn btn-danger">退職</button>
							</td>
						</tr>
					</form>
				</table>
				<div th:if="${taskList != null && #lists.size(taskList) != 0}" th:object="${taskList}">
					<span th:text="|*{getNumber+1}/*{getTotalPages}|"></span>
					<div th:if="${session.mode == 'all'}">
						<ul class="pagination">
							<li style="display:inline" class="page-item">
								<a class="page-link"><span th:if="*{isFirst}">前へ</span></a>
								<!-- 全社員一覧 -->
								<a th:unless="*{isFirst}"
									th:href="@{/task/__${department.id}__(page = *{getNumber - 1})}"
									class="page-link">前へ</a>
							<li th:each="i : *{#numbers.sequence(0,totalPages-1)}" style="display:inline">

								<a class="page-link"><span class="sr-only" th:if="${i} == *{getNumber}"
										th:text="${i +1}"></span></a>

								<!-- <span th:if="${i} == *{getNumber}" th:text="${i +1}"></span> -->
								<a th:if="${i} != *{getNumber}" th:href="@{/task/__${department.id}__(page = ${i})}"
									th:text="${i+1}" class="page-link"></a>
							</li>
							<span th:if="*{isLast}">次へ</span>
							<a th:unless="*{isLast}" th:href="@{/task/__${department.id}__(page = *{getNumber + 1})}"
								class="page-link">次へ</a>
							</li>
						</ul>
					</div>
					<!-- 在籍社員一覧 -->
					<div th:if="${session.mode == true}">
						<ul>
							<li style="display:inline">
								<span th:if="*{isFirst}">前へ</span>


								<a th:unless="*{isFirst}"
									th:href="@{/task/__${department.id}__(page = *{getNumber - 1})}">前へ</a>
							<li th:each="i : *{#numbers.sequence(0,totalPages-1)}" style="display:inline">
								<span th:if="${i} == *{getNumber}" th:text="${i +1}"></span>
								<a th:if="${i} != *{getNumber}"
									th:href="@{/task/true/__${department.id}__(page = ${i})}" th:text="${i+1}"></a>
							</li>
							<span th:if="*{isLast}">次へ</span>
							<a th:unless="*{isLast}"
								th:href="@{/task/true/__${department.id}__(page = *{getNumber + 1})}">次へ</a>
							</li>
						</ul>
					</div>
					<!-- 退職社員一覧 -->
					<div th:if="${session.mode == false}">
						<ul>
							<li style="display:inline">
								<span th:if="*{isFirst}">前へ</span>


								<a th:unless="*{isFirst}"
									th:href="@{/task/__${department.id}__(page = *{getNumber - 1})}">前へ</a>
							<li th:each="i : *{#numbers.sequence(0,totalPages-1)}" style="display:inline">
								<span th:if="${i} == *{getNumber}" th:text="${i +1}"></span>
								<a th:if="${i} != *{getNumber}"
									th:href="@{/task/false/__${department.id}__(page = ${i})}" th:text="${i+1}"></a>
							</li>
							<span th:if="*{isLast}">次へ</span>
							<a th:unless="*{isLast}"
								th:href="@{/task/false/__${department.id}__(page = *{getNumber + 1})}">次へ</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script th:src="@{/webjars/vue/2.6.14/vue.js}"></script>
	<script th:src="@{/js/confirmation.js}"></script>
</body>

</html>